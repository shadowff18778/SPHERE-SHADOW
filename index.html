<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPHERE SHADOW - Accès Sécurisé</title>
    <!-- Chargement de Tailwind CSS pour un style moderne et responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuration de la police Inter (standard et lisible) et du thème rouge/sombre -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        :root {
            font-family: 'Inter', sans-serif;
        }
        /* Style global du corps en noir intense */
        body {
            background-color: #0d0d0d; /* Presque noir */
        }
        /* Animation de chargement spéciale (Sphère qui tourne) */
        @keyframes sphere-spin {
            0% { transform: rotate(0deg) scale(0.8); opacity: 1; }
            50% { transform: rotate(180deg) scale(1.1); opacity: 0.9; }
            100% { transform: rotate(360deg) scale(0.8); opacity: 1; }
        }
        .sphere-loader {
            width: 80px;
            height: 80px;
            border: 8px solid #330000; /* Bordure rouge très sombre */
            border-top-color: #e53e3e; /* Rouge vif pour l'animation */
            border-radius: 50%;
            animation: sphere-spin 1.5s linear infinite;
            filter: drop-shadow(0 0 10px rgba(229, 62, 62, 0.7)); /* Ombre rougeoyer */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col justify-center items-center text-gray-100 p-4 transition-all duration-500">

    <!-- 1. MODALE DE CONSENTEMENT COOKIE (Apparaît une fois par semaine) -->
    <div id="cookie-modal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-700 opacity-0 pointer-events-none">
        <div class="bg-gray-800 border-2 border-red-700 rounded-xl shadow-2xl p-6 md:p-8 w-full max-w-md transform transition-all duration-500 scale-95">
            <h2 class="text-2xl font-bold text-red-400 mb-4 border-b border-red-800 pb-2">ACCÈS PROTOCOLE SHADOW</h2>
            <p class="text-gray-300 mb-6">
                Pour maintenir la sécurité et l'expérience optimisée du réseau SPHERE SHADOW, nous utilisons des "cookies de session". Acceptez-vous le protocole ?
            </p>
            <div class="flex justify-end space-x-4">
                <button onclick="handleCookie(false)" class="px-5 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition duration-300 shadow-md">
                    Refuser
                </button>
                <button onclick="handleCookie(true)" class="px-5 py-2 bg-red-800 text-white font-semibold rounded-lg hover:bg-red-700 transition duration-300 shadow-lg shadow-red-900/50">
                    Accepter et Continuer
                </button>
            </div>
        </div>
    </div>

    <!-- 2. ÉCRAN DE CHARGEMENT STYLÉ (Utilisé pour l'initialisation et le téléchargement) -->
    <div id="loading-screen" class="fixed inset-0 bg-[#0d0d0d] flex flex-col items-center justify-center z-40 transition-opacity duration-500 opacity-0 pointer-events-none">
        <div class="sphere-loader"></div>
        <p id="loading-text" class="mt-8 text-xl font-mono text-red-500 tracking-wider">
            INITIATION DU PROTOCOLE (0%)...
        </p>
        <div class="w-64 h-2 mt-4 bg-gray-800 rounded-full overflow-hidden">
            <div id="loading-bar" class="h-full bg-red-600 transform origin-left transition-transform duration-100" style="width: 0%;"></div>
        </div>
    </div>

    <!-- 3. PORTAIL D'ACCÈS SÉCURISÉ (Contenu principal) -->
    <div id="access-gate" class="flex flex-col items-center justify-center w-full max-w-xl p-8 bg-gray-900 border-2 border-red-900 rounded-xl shadow-2xl shadow-red-900/60 transition-opacity duration-500 opacity-0 pointer-events-none">
        <h1 class="text-4xl md:text-5xl font-extrabold text-red-600 mb-6 tracking-wide">
            SPHERE SHADOW
        </h1>
        <p class="text-red-400 text-lg mb-8 text-center border-b border-red-800 pb-4 w-full">
            AUTHENTIFICATION REQUISE : CLÉ D'ACCÈS
        </p>

        <form id="access-form" class="w-full">
            <input type="password" id="secret-code" placeholder="Entrez la clé secrète..." required
                   class="w-full p-4 mb-4 text-center bg-gray-800 border-2 border-red-700 rounded-lg text-white placeholder-red-300 focus:outline-none focus:ring-2 focus:ring-red-500 transition duration-300 text-xl tracking-widest shadow-inner shadow-black/50">

            <button type="submit"
                    class="w-full py-3 bg-red-700 text-white text-lg font-bold rounded-lg hover:bg-red-600 active:bg-red-800 transition transform duration-300 hover:scale-[1.02] shadow-xl shadow-red-900/70">
                ACTIVER LE PROTOCOLE
            </button>
        </form>

        <p id="message-box" class="mt-6 text-sm text-center text-red-400 min-h-[1.5rem] opacity-0 transition-opacity duration-300"></p>
    </div>

    <!-- 4. PAGE DE CONTENU (Après succès) - MAINTENANT PLEIN ÉCRAN AVEC TÉLÉCHARGEMENT -->
    <div id="success-content" class="absolute inset-0 opacity-0 pointer-events-none transition-opacity duration-500">
        <div class="h-full w-full flex flex-col bg-gray-900 border-2 border-red-700 shadow-2xl shadow-red-900/50">
            <!-- Bandeau de titre Dark Rouge -->
            <header class="p-3 bg-red-900/40 border-b-2 border-red-700">
                <h2 class="text-xl md:text-2xl font-extrabold text-red-400 tracking-wider text-center">
                    SPHERE SHADOW — FICHIERS SÉCURISÉS (MEDIAFIRE)
                </h2>
            </header>

            <!-- Contenu de Téléchargement -->
            <main class="flex-grow flex flex-col items-center justify-center p-8 text-center">
                <p class="text-2xl md:text-3xl font-bold text-red-400 mb-6">
                    FICHIER SHADOW PRÊT AU TÉLÉCHARGEMENT
                </p>
                <p class="text-lg text-gray-300 mb-10 p-2 bg-gray-800 rounded-lg shadow-inner">
                    Nom du Fichier: SHADOW - John Wick 2014.mp4
                </p>

                <!-- Bouton de Téléchargement Stylé (Rond et Animé) -->
                <button id="download-button" onclick="startDownloadLoading()"
                        class="w-32 h-32 md:w-40 md:h-40 flex items-center justify-center bg-red-700 rounded-full shadow-2xl shadow-red-900/80 hover:bg-red-600 transition duration-300 transform hover:scale-105 active:scale-95 group relative overflow-hidden focus:outline-none">
                    
                    <!-- Icône de Téléchargement (Flèche vers le bas) -->
                    <svg class="w-16 h-16 text-white transition-transform duration-300 group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                </button>

                <p id="download-message" class="mt-6 text-sm text-center text-red-400 opacity-0 transition-opacity duration-300"></p>
            </main>

            <!-- Footer discret -->
            <footer class="p-1 bg-red-900/40 border-t-2 border-red-700 text-center text-xs text-red-500">
                Protocole activé. Données transmises via canal sécurisé.
            </footer>
        </div>
    </div>

    <script>
        // === Configuration et Variables Globales ===
        const ONE_WEEK_MS = 7 * 24 * 60 * 60 * 1000;
        const LOADING_DURATION_MS = 5000;
        const SECRET_CODES = ['95741', 'ERVIS', 'SHADOW1']; // Les codes secrets, sécurisés dans le JS
        const STORAGE_KEY = 'lastCookieCheck';
        const DOWNLOAD_URL = 'https://download1324.mediafire.com/elrhudzhi7egOf-ywAD086yPBeBHmLuhno6u_x0bxmZ93dRdnt_AdYoqPUL_wJd7nfN6y8XmwZ7UbdZuHbmWjFNTtRc2kOVJVy-p09tl_y77cyvkxe30ukub3r5EkILF_YMNWReZ8J3-XyHgwWXonGnUOvp1_SU0BLZNRfZCpCQi/zmd22b97ksn9ibb/SHADOW+-+John+Wick+2014.mp4';
        
        // === Références DOM ===
        const cookieModal = document.getElementById('cookie-modal');
        const accessGate = document.getElementById('access-gate');
        const loadingScreen = document.getElementById('loading-screen');
        const successContent = document.getElementById('success-content');
        const accessForm = document.getElementById('access-form');
        const secretCodeInput = document.getElementById('secret-code');
        const messageBox = document.getElementById('message-box');
        const loadingText = document.getElementById('loading-text');
        const loadingBar = document.getElementById('loading-bar');
        const downloadButton = document.getElementById('download-button');


        // === Fonctions de Contrôle de l'Affichage ===

        /** Gère l'affichage initial du modal de cookies. */
        function checkCookieConsent() {
            const lastCheck = localStorage.getItem(STORAGE_KEY);
            const now = Date.now();

            if (!lastCheck || (now - parseInt(lastCheck) > ONE_WEEK_MS)) {
                // Si la clé n'existe pas ou si plus d'une semaine s'est écoulée, afficher la modale
                showModal(cookieModal);
            } else {
                // Sinon, passer directement à la porte d'accès
                showGate();
            }
        }

        /** Affiche un élément avec une animation fluide. */
        function showModal(element) {
            // S'assure que l'élément est prêt à apparaître
            element.classList.remove('pointer-events-none', 'opacity-0');
            // Force le navigateur à reconnaître le changement d'état avant l'animation
            requestAnimationFrame(() => {
                element.classList.add('opacity-100');
                // Effet de zoom sur le contenu de la modale (si applicable)
                const modalContent = element.querySelector('div');
                if (modalContent && modalContent.classList.contains('scale-95')) modalContent.classList.remove('scale-95');
            });
        }

        /** Cache un élément avec une animation fluide. */
        function hideModal(element, callback) {
            // Effet de zoom inverse sur le contenu de la modale (si applicable)
            const modalContent = element.querySelector('div');
            if (modalContent && modalContent.classList.contains('scale-95')) modalContent.classList.add('scale-95');

            element.classList.remove('opacity-100');
            element.classList.add('opacity-0');

            // Attend la fin de l'animation pour masquer complètement l'élément
            setTimeout(() => {
                element.classList.add('pointer-events-none');
                if (callback) callback();
            }, 700); // 700ms pour correspondre à la transition-opacity
        }

        /** Gère le clic sur Accepter/Refuser les cookies. */
        window.handleCookie = function(accepted) {
            // Sauvegarde la date dans localStorage pour une réapparition dans une semaine
            localStorage.setItem(STORAGE_KEY, Date.now());

            // Cache la modale avec animation et passe à la page principale (gate)
            hideModal(cookieModal, showGate);
        }

        /** Affiche le portail d'accès au contenu (la page principale). */
        function showGate() {
            accessGate.classList.remove('opacity-0', 'pointer-events-none');
            accessGate.classList.add('opacity-100');
        }

        /** Déclenche et gère l'écran de chargement de 5 secondes (pour l'initialisation). */
        function startLoading() {
            hideModal(accessGate); // Cache le formulaire d'accès
            showModal(loadingScreen); // Affiche le loader

            let start = Date.now();
            let timer = 0;
            const interval = 50; 
            
            // Réinitialise le texte pour l'initialisation
            loadingText.textContent = `INITIATION DU PROTOCOLE (0%)...`;

            const loadingInterval = setInterval(() => {
                timer = Date.now() - start;
                let progress = Math.min(100, Math.floor((timer / LOADING_DURATION_MS) * 100));

                // Met à jour la barre de progression et le texte
                loadingBar.style.width = `${progress}%`;
                loadingText.textContent = `INITIATION DU PROTOCOLE (${progress}%)...`;

                if (progress >= 100) {
                    clearInterval(loadingInterval);
                    // 5. Après 5 secondes, passer au contenu final
                    showSuccessPage();
                }
            }, interval);
        }
        
        /** Déclenche et gère l'écran de chargement de 5 secondes (pour le téléchargement). */
        window.startDownloadLoading = function() {
            downloadButton.disabled = true; // Désactiver le bouton pour éviter les clics multiples
            
            // Cache la page de succès et affiche le loader
            hideModal(successContent);
            showModal(loadingScreen);

            let start = Date.now();
            let timer = 0;
            const interval = 50; 
            
            // Réinitialise le texte pour le téléchargement
            loadingText.textContent = `PRÉPARATION DU TÉLÉCHARGEMENT SÉCURISÉ (0%)...`;

            const loadingInterval = setInterval(() => {
                timer = Date.now() - start;
                let progress = Math.min(100, Math.floor((timer / LOADING_DURATION_MS) * 100));

                // Met à jour la barre de progression et le texte
                loadingBar.style.width = `${progress}%`;
                loadingText.textContent = `PRÉPARATION DU TÉLÉCHARGEMENT SÉCURISÉ (${progress}%)...`;

                if (progress >= 100) {
                    clearInterval(loadingInterval);
                    // 5. Après 5 secondes, redirection vers le lien Mediafire
                    window.location.href = DOWNLOAD_URL;
                }
            }, interval);
        }


        /** Affiche le contenu final (maintenant plein écran avec le bouton de téléchargement). */
        function showSuccessPage() {
            hideModal(loadingScreen); // Cache le loader
            showModal(successContent); // Affiche la page de succès
            if (downloadButton) downloadButton.disabled = false; // Réactiver le bouton si l'utilisateur revient
        }

        /** Affiche un message d'erreur ou de succès temporaire. */
        function displayMessage(text, isError = false) {
            messageBox.textContent = text;
            messageBox.classList.remove('text-red-400', 'text-green-400');
            messageBox.classList.add(isError ? 'text-red-400' : 'text-green-400');
            messageBox.classList.add('opacity-100');

            setTimeout(() => {
                messageBox.classList.remove('opacity-100');
            }, isError ? 3000 : 1500); // Garde le message d'erreur plus longtemps
        }

        // === Écouteur d'événement pour le formulaire d'accès ===
        accessForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const inputCode = secretCodeInput.value.trim().toUpperCase();

            // Vérification sécurisée des codes
            if (SECRET_CODES.includes(inputCode)) {
                displayMessage("ACCÈS AUTORISÉ. Préparation...", false);
                // Démarre le chargement de 5 secondes pour l'initialisation
                startLoading();
            } else {
                // Code incorrect
                displayMessage("CLÉ D'ACCÈS INVALIDE. Tentative enregistrée.", true);
                secretCodeInput.value = ''; // Efface le champ
            }
        });


        // === Démarrage de l'Application ===
        window.onload = checkCookieConsent;

    </script>
</body>
</html>
